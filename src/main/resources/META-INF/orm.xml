<?xml version="1.0" encoding="UTF-8" ?>
<entity-mappings xmlns="http://xmlns.jcp.org/xml/ns/persistence/orm"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence/orm
        http://xmlns.jcp.org/xml/ns/persistence/orm_2_1.xsd" version="2.1">

    <!-- Set the default to FIELD-access -->
    <persistence-unit-metadata>
        <persistence-unit-defaults>
            <access>FIELD</access>
        </persistence-unit-defaults>
    </persistence-unit-metadata>

    <entity class="com.benz.usecase.domain.UseCase" >
        <attributes >
            <id name="id"></id>
            <embedded name="timeFrame"></embedded>
            <one-to-one name="result" >
                <join-column name="result_id" referenced-column-name="id" />
            </one-to-one>
            <one-to-one name="analysisModel" >
                <join-column name="analysis_model_id" referenced-column-name="id" />
            </one-to-one>
        </attributes>
        <convert converter="com.benz.usecase.adapter.persistence.CaseSubjectConverter" attribute-name="subject"/>
    </entity>

    <embeddable class="com.benz.usecase.domain.TimeFrame"></embeddable>

    <entity class="com.benz.usecase.domain.ResultFile">
        <attributes>
            <id name="id"></id>
             <!--<many-to-one name="result">
                 <join-column name="result_id" referenced-column-name="id"></join-column>
                 <cascade>CascadeType.ALL</cascade>
             </many-to-one>-->
        </attributes>
    </entity>

    <entity class="com.benz.usecase.domain.Result">
        <attributes>
            <id name="id"></id>
            <!--<one-to-many name="files" target-entity="com.benz.usecase.domain.ResultFile" mapped-by="result" fetch="EAGER">
                <cascade>CascadeType.ALL</cascade>
            </one-to-many>-->
        </attributes>
    </entity>

    <entity class="com.benz.usecase.domain.AnalysisModel">
        <attributes>
            <id name="id"></id>
        </attributes>
    </entity>

    <entity class="com.benz.usecase.domain.AnalysisModelFile">
        <attributes>
            <id name="id"></id>
        </attributes>
    </entity>

    <named-native-query name="countUseCase">
        <query><![CDATA[
            select
                count(*)
            from
                use_case
        ]]></query>
    </named-native-query>

    <named-native-query name="searchUseCase" result-set-mapping="useCaseMapping">
        <query><![CDATA[
            select
                id as id,
                subject as subject,
                value as value,
                scenario as scenario,
                result as result,
                data_source as data_source,
                data_type_description as data_type_description,
                analysis_model as analysis_model,
                contributionbu as contributionbu,
                stage as stage,
                afrom_value as afrom_value,
                ato_value as ato_value,
                contact as contact
            from
                use_case
        ]]></query>
    </named-native-query>

    <named-native-query name="findByIdUseCase" result-set-mapping="useCaseMapping">
        <query><![CDATA[
            select
                id as id,
                subject,
                value,
                scenario,
                result,
                data_source,
                data_type_description,
                analysis_model,
                contributionbu,
                stage,
                afrom_value,
                ato_value,
                contact
            from
                use_case
            where
                id = ?

        ]]></query>
    </named-native-query>

    <sql-result-set-mapping name="useCaseMapping">
        <constructor-result target-class="com.benz.usecase.query.UseCaseResult">
            <column name="id"></column>
            <column name="subject"></column>
            <column name="value"></column>
            <column name="scenario"></column>
            <column name="result"></column>
            <column name="data_source"></column>
            <column name="data_type_description"></column>
            <column name="analysis_model"></column>
            <column name="contributionbu"></column>
            <column name="stage"></column>
            <column name="afrom_value" class="java.lang.String"></column>
            <column name="ato_value" class="java.lang.String"></column>
            <column name="contact"></column>
        </constructor-result>
    </sql-result-set-mapping>

</entity-mappings>